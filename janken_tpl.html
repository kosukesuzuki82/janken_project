<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<title>カードゲーム</title>
</head>
<body>
  
<header>
  <p class="header_title">カードゲーム</p>
</header>

<main>
  <section>
    <h1>ルール紹介</h1>
    <ul>
      <li>カードは手持ちが1-5</li>
      <li>5枚から1枚を選ぶ</li>
      <li>数字が大きい手札が勝利</li>
      <li>5には1が勝つ</li>
      <li>各カードは一度しか使用できない</li> 
      <li>3勝した方が勝ち</li>
    </ul>
    <h1>手順</h1>
    <ul>
      <li>プレイヤーのカードをクリックで選択</li>
      <li>フィールドに出たカードをダブルクリックで削除</li>
      <li>5回対戦後、Culcボタンをクリック(未実装)</li>
      <!-- result_seiseki1-5の文字列が取得できない為、計算ができない -->
      <li>Resultボタンをクリック(未実装→Draw出現)</li>
      <!-- 計算式は完成したが、文字列取得できない為、結果計算できず -->
      <li>Startボタンで再スタート</li> 
    </ul>
    <h1>フィールド</h1>
    <div class="banmen" class="result_buttonclick">
      <!-- 盤面 -->
        <div class="result_buttonclick"></div>  
        <div>
            <button class="start_button">Reset</button>
            <button class="result_button">Result</button>
            <button class="culc_button">Culc</button>
          </div>
        <!-- ディーラーフィールド -->
        <div class="dealer">
          <p class="dealer_title">ディーラー</p>
          <div class="dealercard_box">
              <button id="dealercard_parts" class="dealer_one">
                <p class="card_dealer1">A</p>
                <p class="card_dealer2">♠︎</p>
                <p class="card_dealer3">A</p>
              </button>
              <button id="dealercard_parts" class="dealer_two">
                <p class="card_dealer1">2</p>
                <p class="card_dealer2">♠︎</p>
                <p class="card_dealer3">2</p>
              </button>
              <button id="dealercard_parts" class="dealer_three">
                <p class="card_dealer1">3</p>
                <p class="card_dealer2">♠︎</p>
                <p class="card_dealer3">3</p>
              </button>
              <button id="dealercard_parts" class="dealer_four">
                <p class="card_dealer1">4</p>
                <p class="card_dealer2">♠︎</p>
                <p class="card_dealer3">4</p>
              </button>
              <button id="dealercard_parts" class="dealer_five">
                <p class="card_dealer1">5</p>
                <p class="card_dealer2">♠︎</p>
                <p class="card_dealer3">5</p>
              </button>
          </div>
        </div>
        <!-- 勝敗表示フィールド -->

        <div class="battle">
          <div class="count" value="i"></div>
          <div class="player_field"><p></p></div>
          <p class="result">結果</p>
          <ul class="result_list">
            <li class="result_seiseki1"></li>
            <li class="result_seiseki2"></li>
            <li class="result_seiseki3"></li>
            <li class="result_seiseki4"></li>
            <li class="result_seiseki5"></li>
          </ul>
          <div class="dealer_field"><p></p></div>
        </div>
        <!-- プレイヤーフィールド -->
        <div class="player">
          <p class="player_title">プレイヤー</p>
            <div class="playercard_box">
              <button id="card_parts" class="one" value="1" draggable="true">
                <p class="card_player1">A</p>
                <p class="card_player2">♦︎</p>
                <p class="card_player3">A</p>
              </button>
              <button id="card_parts" class="two" value="2" draggable="true">
                <p class="card_player1">2</p>
                <p class="card_player2">♦︎</p>
                <p class="card_player3">2</p>
              </button>
              <button id="card_parts" class="three" value="3" draggable="true">
                <p class="card_player1">3</p>
                <p class="card_player2">♦︎</p>
                <p class="card_player3">3</p>
              </button>
              <button id="card_parts" class="four" value="4" draggable="true">
                <p class="card_player1">4</p>
                <p class="card_player2">♦︎</p>
                <p class="card_player3">4</p>
              </button>
              <button id="card_parts" class="five" value="5" draggable="true">
                <p class="card_player1">5</p>
                <p class="card_player2">♦</p>
                <p class="card_player3">5</p>
              </button>
            </div>
        </div>
    </div>
  </section>
</main>

<footer></footer>
<script>
// 全体の勝敗を検証する
// let result_one = document.getElementsByClassName("result_seiseki1");
// let result_two = document.getElementsByClassName("result_seiseki2");
// let result_three = document.getElementsByClassName("result_seiseki3");
// let result_four = document.getElementsByClassName("result_seiseki4");
// let result_five = document.getElementsByClassName("result_seiseki5");
let result_one = $(".result_seiseki1").html();
let result_two = $(".result_seiseki2").html();
let result_three = $(".result_seiseki3").html();
let result_four = $(".result_seiseki4").html();
let result_five = $(".result_seiseki5").html();
console.log(result_one.innerHTML);
console.log(result_two.innerHTML);
console.log(result_three.innerHTML);
console.log(result_four.innerHTML);
console.log(result_five.innerHTML);


// culcボタンの設定
let s = 0;
let k = 0;
let l = 0;

$(".culc_button").on("click",function(){
  if(result_one=="◯◯◯"){s = s + 1;
  }
  else if(result_two=="◯◯◯"){
    s = s + 1;
  }
  else if(result_three=="◯◯◯"){
    s = s + 1;
  }
  else if(result_four=="◯◯◯"){
    s = s + 1;
  }
  else if(result_five=="◯◯◯"){
    s = s + 1;
  }
  if(result_one=="✖️✖️✖️"){
    k = k + 1;
  }
  else if(result_two=="✖️✖️✖️"){
    k = k + 1;
  }
  else if(result_three=="✖️✖️✖️"){
    k = k + 1;
  }
  else if(result_four=="✖️✖️✖️"){
    k = k + 1;
  }
  else if(result_five=="✖️✖️✖️"){
    k = k + 1;  
  }
  if(result_one=="△△△"){
    l = l + 1;
  }
  else if(result_two=="△△△"){
    l = l + 1;
  }
  else if(result_three=="△△△"){
    l = l + 1;
  }
  else if(result_four=="△△△"){
    l = l + 1;
  }
  else if(result_five=="△△△"){
    l = l + 1;
  }
});

console.log(s);
console.log(l);
console.log(k);

//resultボタンの設定
$(".result_button").on("click",function(){
  if(s>=3||s>=2&&l>=2||s==1&&l==4){
    $(".result_buttonclick").append("Victory");
    $(".result_buttonclick").css("background-color","yellow");
  }
  else if(k==s){
    $(".result_buttonclick").append("Draw");
    $(".result_buttonclick").css("background-color","yellow");
  }
  else if(s==1&&k>=2||s>=2&&k==3 ||s==0&&l<=4){
    $(".result_buttonclick").append("Lose");
    $(".result_buttonclick").css("background-color","yellow");
  }
}
);

// 文字数制限
// let result_seiseki1 = document.querySelector(".result_seiseki1");
// let str1 = result_seiseki1.textContent;
// const length = 1;


// 相手の手を設定する
let arr = [1,2,3,4,5];
let a =arr.length;

while (a) {
  let j = Math.ceil(Math.random()*a);
  let t = arr[--a];
  arr[a] = arr[j];
  arr[j] = t;
}
let b = arr.shift();
console.log(b);
let bb = arr.shift();
console.log(bb);
let bbb = arr.shift();
console.log(bbb);
let bbbb = arr.shift();
console.log(bbbb);
let bbbbb = arr.shift();
console.log(bbbbb);

// resetボタンの設定
$(".start_button").on("click",function(){
window.location.reload()});



// 場に出したカードを消す
$(".dealer_one").dblclick(function(){
  $(".dealer_one").remove(".dealer_one");
})
$(".dealer_two").dblclick(function(){
  $(".dealer_two").remove(".dealer_two");
})
$(".dealer_three").dblclick(function(){
  $(".dealer_three").remove(".dealer_three");
})
$(".dealer_four").dblclick(function(){
  $(".dealer_four").remove(".dealer_four");
})
$(".dealer_five").dblclick(function(){
  $(".dealer_five").remove(".dealer_five");
})

$(".one").dblclick(function(){
  $(".one").remove(".one");
});
$(".two").dblclick(function(){
  $(".two").remove(".two");
});
$(".three").dblclick(function(){
  $(".three").remove(".three");
});
$(".four").dblclick(function(){
  $(".four").remove(".four");
});
$(".five").dblclick(function(){
  $(".five").remove(".five");
});


// 手札を選んだ際のアクション・結果の明示設定
$("button.one").on("click",function(){
  $("button.one").hide;
  $("button.one").prependTo(".player_field");
  if(b==1){
    $(".result").html("引き分け");
    $(".result_seiseki1").append("△");
    $(".dealer_one").hide;
    $(".dealer_one").prependTo(".dealer_field");
  }
  else if(b==2){
    $(".result").html("負け");
    $(".dealer_two").hide;
    $(".dealer_two").prependTo(".dealer_field");
    $(".result_seiseki1").append("✖️");
  }
  else if(b==3){
    $(".result").html("負け");
    $(".result_seiseki1").append("✖️");
    $(".dealer_three").hide;
    $(".dealer_three").prependTo(".dealer_field");
  }
  else if(b==4){
    $(".result").html("負け");
    $(".result_seiseki1").append("✖️");
    $(".dealer_four").hide;
    $(".dealer_four").prependTo(".dealer_field");
    }
    else{
    $(".result").html("勝ち");
    $(".result_seiseki1").append("◯");
    $(".dealer_five").hide;
    $(".dealer_five").prependTo(".dealer_field");
  }
});


$("button.two").on("click",function(){
  $("button.two").hide;
  $("button.two").prependTo(".player_field");
    if(bb==1){
    $(".result").html("勝ち");
    $(".result_seiseki2").append("◯");
    $(".dealer_one").hide;
    $(".dealer_one").prependTo(".dealer_field");
  }
  else if(bb==2){
    $(".result").html("引き分け");
    $(".result_seiseki2").append("△");
    $(".dealer_two").hide;
    $(".dealer_two").prependTo(".dealer_field");
  }
  else if(bb==3){
    $(".result").html("負け");
    $(".result_seiseki2").append("✖️");
    $(".dealer_three").hide;
    $(".dealer_three").prependTo(".dealer_field");
  }
  else if(bb==4){
    $(".result").html("負け");
    $(".result_seiseki2").append("✖️");
    $(".dealer_four").hide;
    $(".dealer_four").prependTo(".dealer_field");
    }
    else{
    $(".result").html("負け");
    $(".result_seiseki2").append("✖️");
    $(".dealer_five").hide;
    $(".dealer_five").prependTo(".dealer_field");
  }

});

$("button.three").on("click",function(){
  $("button.three").hide;
  $("button.three").prependTo(".player_field");
  if(bbb==1){
    $(".result").html("勝ち");
    $(".result_seiseki3").append("◯");
    $(".dealer_one").hide;
    $(function(){$(".dealer_one").prependTo(".dealer_field");
    })
  }
  else if(bbb==2){
    $(".result").html("勝ち");
    $(".result_seiseki3").append("◯");
    $(".dealer_two").hide;
    $(function(){$(".dealer_two").prependTo(".dealer_field");
    })
  }
  else if(bbb==3){
    $(".result").html("引き分け");
    $(".result_seiseki3").append("△");
    $(".dealer_three").hide;
    $(function(){$(".dealer_three").prependTo(".dealer_field");
    })
  }
  else if(bbb==4){
    $(".result").html("負け");
    $(".result_seiseki3").append("✖️");
    $(".dealer_four").hide;
    $(function(){$(".dealer_four").prependTo(".dealer_field");
    })
    }
    else{
    $(".result").html("負け");
    $(".result_seiseki3").append("✖️");
    $(".dealer_five").hide;
    $(function(){$(".dealer_five").prependTo(".dealer_field");
    })
  }  
});

$("button.four").on("click",function(){
  $("button.four").hide;
  $("button.four").prependTo(".player_field");
  if(bbbb==1){
    $(".result").html("勝ち");
    $(".result_seiseki4").append("◯");
    $(".dealer_one").hide;
    $(function(){$(".dealer_one").prependTo(".dealer_field");
    })
  }
  else if(bbbb==2){
    $(".result").html("勝ち");
    $(".result_seiseki4").append("◯");
    $(".dealer_two").hide;
    $(function(){$(".dealer_two").prependTo(".dealer_field");
    })
  }
  else if(bbbb==3){
    $(".result").html("勝ち");
    $(".result_seiseki4").append("◯");
    $(".dealer_three").hide;
    $(function(){$(".dealer_three").prependTo(".dealer_field");
    })
  }
  else if(bbbb==4){
    $(".result").html("引き分け");
    $(".result_seiseki4").append("△");
    $(".dealer_four").hide;
    $(function(){$(".dealer_four").prependTo(".dealer_field");
    })
    }
    else{
    $(".result").html("負け");
    $(".result_seiseki4").append("✖️");
    $(".dealer_five").hide;
    $(function(){$(".dealer_five").prependTo(".dealer_field");
    })
  }
});

$("button.five").on("click",function(){
  $("button.five").hide;
  $("button.five").prependTo(".player_field");
  if(bbbbb==1){
    $(".result").html("負け");
    $(".result_seiseki5").append("✖️");
    $(".dealer_one").hide;
    $(function(){$(".dealer_one").prependTo(".dealer_field");
    })
  }
  else if(bbbbb==2){
    $(".result").html("勝ち");
    $(".result_seiseki5").append("◯");
    $(".dealer_two").hide;
    $(function(){$(".dealer_two").prependTo(".dealer_field");
    })
  }
  else if(bbbbb==3){
    $(".result").html("勝ち");
    $(".result_seiseki5").append("◯");
    $(".dealer_three").hide;
    $(function(){$(".dealer_three").prependTo(".dealer_field");
    })
  }
  else if(bbbbb==4){
    $(".result").html("勝ち");
    $(".result_seiseki5").append("◯");
    $(".dealer_four").hide;
    $(function(){$(".dealer_four").prependTo(".dealer_field");
    })
    }
    else{
    $(".result").html("引き分け");
    $(".result_seiseki5").append("△");
    $(".dealer_five").hide;
    $(function(){$(".dealer_five").prependTo(".dealer_field");
    })
  }
});






// ドラッグアンドドロップ実装断念
// // 要素の取得
// let one = document.querySelector(".one");
// let two = document.querySelector(".two");
// let three = document.querySelector(".three");
// let four = document.querySelector(".four");
// let five = document.querySelector(".five");
// one.value = 1;
// two.value = 2;
// three.value = 3;
// four.value = 4;
// five.value = 5;
// // console.log(one);
// // console.log(two);
// // console.log(three);
// // console.log(four);
// // console.log(five);

// let card_parts = document.querySelector("#card_parts");
// const player_field = document.querySelector(".player_field");
// // ドラッグのトリガー
// // card_parts.addEventListener( "dragstart", dragStart );
// // card_parts.addEventListener( "dragend", dragEnd );
// one.addEventListener( "dragstart", dragStart );
// two.addEventListener( "dragend", dragEnd );
// three.addEventListener( "dragstart", dragStart );
// four.addEventListener( "dragend", dragEnd );
// five.addEventListener( "dragend", dragEnd );


// // 空欄要素を取得
// player_field.addEventListener("dragover",dragOver);
// player_field.addEventListener("dragenter",dragEnter);
// player_field.addEventListener("dragleave",dragLeave);
// player_field.addEventListener("drop",dragDrop);

// // ドラッグ関数

// function dragStart(){
//   console.log("start");
//   card_parts.className += "hold";
//   setTimeout(() =>{
//   card_parts.className = "invisible";
//   }, 0);
//   console.log("start");
// }
// function dragEnd(){
//   card_parts.className ="card_parts";
// }
// function dragOver(e){
//   e.preventDefault();
//   console.log("over");
// }function dragEnter(){
//   console.log("enter");
// }function dragLeave(){
//   console.log("leave");
// }
// function dragDrop(e){
//   this.appendChild(one);
//   console.log("drop");
// }

</script>
</body>
</html>
